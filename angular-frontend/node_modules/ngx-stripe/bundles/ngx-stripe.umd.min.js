!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/operators"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-stripe",["exports","@angular/core","rxjs/operators","@angular/common","rxjs"],e):e((t=t||self)["ngx-stripe"]={},t.ng.core,t.rxjs.operators,t.ng.common,t.rxjs)}(this,(function(t,e,n,i,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function s(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function p(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,p)}u((i=i.apply(t,e||[])).next())}))}function o(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function p(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var a=new e.InjectionToken("Stripe Publishable Key"),c=new e.InjectionToken("Stripe Options"),m=function(){function t(t){this.platformId=t}return t.prototype.getNativeWindow=function(){return i.isPlatformBrowser(this.platformId)?window:{}},t}();m.decorators=[{type:e.Injectable}],m.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]};var h=function(){function t(t){this.platformId=t}return t.prototype.getNativeDocument=function(){return i.isPlatformBrowser(this.platformId)?document:{}},t}();h.decorators=[{type:e.Injectable}],h.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]};var l=function(){function t(t,e,n){this.platformId=t,this.window=e,this.document=n,this.status=new r.BehaviorSubject({error:!1,loaded:!1,loading:!1})}return t.prototype.asStream=function(){return this.load(),this.status.asObservable()},t.prototype.isReady=function(){return this.status.getValue().loaded},t.prototype.load=function(){var t=this;if(!i.isPlatformServer(this.platformId)){var e=this.status.getValue();if(this.window.getNativeWindow().hasOwnProperty("Stripe"))this.status.next({error:!1,loaded:!0,loading:!1});else if(!e.loaded&&!e.loading){this.status.next(Object.assign(Object.assign({},e),{loading:!0}));var n=this.document.getNativeDocument().createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src="https://js.stripe.com/v3/",n.onload=function(){t.status.next({error:!1,loaded:!0,loading:!1})},n.onerror=function(){t.status.next({error:!0,loaded:!1,loading:!1})},this.document.getNativeDocument().body.appendChild(n)}}},t}();l.decorators=[{type:e.Injectable}],l.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]},{type:m},{type:h}]};var f=function(){function t(t,e,i,s){var o=this;this.loader=t,this.window=e,this.key=i,this.options=s,this.stripe$=new r.BehaviorSubject(void 0),this.stripe=this.stripe$.asObservable().pipe(n.filter((function(t){return Boolean(t)}))),this.loader.asStream().pipe(n.filter((function(t){return!0===t.loaded})),n.first(),n.map((function(){return o.window.getNativeWindow().Stripe}))).subscribe((function(t){var e=o.options?t(o.key,o.options):t(o.key);o.stripe$.next(e)}))}return t.prototype.getInstance=function(){return this.stripe$.getValue()},t.prototype.elements=function(t){return this.stripe$.asObservable().pipe(n.filter((function(t){return Boolean(t)})),n.map((function(e){return e.elements(t)})),n.first())},t.prototype.redirectToCheckout=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.redirectToCheckout(t))})),n.first())},t.prototype.confirmAuBecsDebitPayment=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmAuBecsDebitPayment(t,e))})),n.first())},t.prototype.confirmBancontactPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmBancontactPayment(t,e,i))})),n.first())},t.prototype.confirmCardPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmCardPayment(t,e,i))})),n.first())},t.prototype.confirmEpsPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmEpsPayment(t,e,i))})),n.first())},t.prototype.confirmFpxPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmFpxPayment(t,e,i))})),n.first())},t.prototype.confirmGiropayPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmGiropayPayment(t,e,i))})),n.first())},t.prototype.confirmIdealPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmIdealPayment(t,e,i))})),n.first())},t.prototype.confirmP24Payment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmP24Payment(t,e,i))})),n.first())},t.prototype.confirmSepaDebitPayment=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmSepaDebitPayment(t,e))})),n.first())},t.prototype.handleCardAction=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.handleCardAction(t))})),n.first())},t.prototype.createPaymentMethod=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.createPaymentMethod(t))})),n.first())},t.prototype.retrievePaymentIntent=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.retrievePaymentIntent(t))})),n.first())},t.prototype.confirmAuBecsDebitSetup=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmAuBecsDebitSetup(t,e))})),n.first())},t.prototype.confirmCardSetup=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmCardSetup(t,e,i))})),n.first())},t.prototype.confirmSepaDebitSetup=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmSepaDebitSetup(t,e))})),n.first())},t.prototype.retrieveSetupIntent=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.confirmSepaDebitSetup(t))})),n.first())},t.prototype.paymentRequest=function(t){var e=this.getInstance();return e?e.paymentRequest(t):void 0},t.prototype.createToken=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.createToken(t,e))})),n.first())},t.prototype.createSource=function(t,e){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.createSource(t,e))})),n.first())},t.prototype.retrieveSource=function(t){return this.stripe.pipe(n.switchMap((function(e){return r.from(e.retrieveSource(t))})),n.first())},t.prototype.handleCardPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.handleCardPayment(t,e,i))})),n.first())},t.prototype.confirmPaymentIntent=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmPaymentIntent(t,e,i))})),n.first())},t.prototype.handleCardSetup=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.handleCardSetup(t,e,i))})),n.first())},t.prototype.confirmSetupIntent=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.confirmSetupIntent(t,e,i))})),n.first())},t.prototype.handleFpxPayment=function(t,e,i){return this.stripe.pipe(n.switchMap((function(n){return r.from(n.handleFpxPayment(t,e,i))})),n.first())},t}(),y=function(){function t(t,e,n,i){this.key=t,this.options=e,this.loader=n,this.window=i,t&&(this.stripe=new f(this.loader,this.window,t,e))}return t.prototype.getStripeReference=function(){var t=this;return this.loader.asStream().pipe(n.filter((function(t){return!0===t.loaded})),n.map((function(){return t.window.getNativeWindow().Stripe})))},t.prototype.getInstance=function(){return this.stripe.getInstance()},t.prototype.setKey=function(t,e){return this.changeKey(t,e)},t.prototype.changeKey=function(t,e){return this.stripe=new f(this.loader,this.window,t,e),this.stripe},t.prototype.elements=function(t){return this.stripe.elements(t)},t.prototype.redirectToCheckout=function(t){return this.stripe.redirectToCheckout(t)},t.prototype.confirmAuBecsDebitPayment=function(t,e){return this.stripe.confirmAuBecsDebitPayment(t,e)},t.prototype.confirmBancontactPayment=function(t,e,n){return this.stripe.confirmBancontactPayment(t,e,n)},t.prototype.confirmCardPayment=function(t,e,n){return this.stripe.confirmCardPayment(t,e,n)},t.prototype.confirmEpsPayment=function(t,e,n){return this.stripe.confirmEpsPayment(t,e,n)},t.prototype.confirmFpxPayment=function(t,e,n){return this.stripe.confirmFpxPayment(t,e,n)},t.prototype.confirmGiropayPayment=function(t,e,n){return this.stripe.confirmGiropayPayment(t,e,n)},t.prototype.confirmIdealPayment=function(t,e,n){return this.stripe.confirmIdealPayment(t,e,n)},t.prototype.confirmP24Payment=function(t,e,n){return this.stripe.confirmP24Payment(t,e,n)},t.prototype.confirmSepaDebitPayment=function(t,e){return this.stripe.confirmSepaDebitPayment(t,e)},t.prototype.handleCardAction=function(t){return this.stripe.handleCardAction(t)},t.prototype.createPaymentMethod=function(t){return this.stripe.createPaymentMethod(t)},t.prototype.retrievePaymentIntent=function(t){return this.stripe.retrievePaymentIntent(t)},t.prototype.confirmAuBecsDebitSetup=function(t,e){return this.stripe.confirmAuBecsDebitSetup(t,e)},t.prototype.confirmCardSetup=function(t,e,n){return this.stripe.confirmCardSetup(t,e,n)},t.prototype.confirmSepaDebitSetup=function(t,e){return this.stripe.confirmSepaDebitSetup(t,e)},t.prototype.retrieveSetupIntent=function(t){return this.stripe.retrieveSetupIntent(t)},t.prototype.paymentRequest=function(t){return this.stripe.paymentRequest(t)},t.prototype.createToken=function(t,e){return this.stripe.createToken(t,e)},t.prototype.createSource=function(t,e){return this.stripe.createSource(t,e)},t.prototype.retrieveSource=function(t){return this.stripe.retrieveSource(t)},t.prototype.handleCardPayment=function(t,e,n){return this.stripe.handleCardPayment(t,e,n)},t.prototype.confirmPaymentIntent=function(t,e,n){return this.stripe.confirmPaymentIntent(t,e,n)},t.prototype.handleCardSetup=function(t,e,n){return this.stripe.handleCardSetup(t,e,n)},t.prototype.confirmSetupIntent=function(t,e,n){return this.stripe.confirmSetupIntent(t,e,n)},t.prototype.handleFpxPayment=function(t,e,n){return this.stripe.handleFpxPayment(t,e,n)},t}();y.decorators=[{type:e.Injectable}],y.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[a]}]},{type:void 0,decorators:[{type:e.Inject,args:[c]}]},{type:l},{type:m}]};var d=function(){function t(t){this.stripeService=t}return t.prototype.elements=function(t,e){return void 0===e&&(e={}),t?Object.keys(e).length>0?t.elements(e):t.elements():Object.keys(e).length>0?this.stripeService.elements(e):this.stripeService.elements()},t.prototype.paymentRequest=function(t,e){return t?t.paymentRequest(e):this.stripeService.paymentRequest(e)},t.prototype.mergeOptions=function(t,e){return!e||t&&t.classes||t&&t.classes?t||{}:Object.assign(Object.assign({},t||{}),{classes:{base:e,complete:e+"--complete",empty:e+"--empty",focus:e+"--focus",invalid:e+"--invalid",webkitAutoFill:e+"--webkit-autoFill"}})},t}();d.decorators=[{type:e.Injectable}],d.ctorParameters=function(){return[{type:y}]};var v=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,t.elementsOptions||t.stripe||!this.elements?(i=this,[4,this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]):[3,2];case 1:i.elements=r.sent(),n=!0,r.label=2;case 2:return(t.options||t.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t.elements=e.sent(),this.createElement(),this.state="ready",e.label=2;case 2:return[2]}}))}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCard=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("card",t),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t}();v.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-card",template:'<div class="field" #stripeElementRef></div>'}]}],v.ctorParameters=function(){return[{type:d}]},v.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var E=function(){function t(t){this.stripeElementsService=t,this.elements=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.elementsOptions,n=this.stripe,t.elementsOptions||t.stripe||!this._elements?(i=this,[4,this.stripeElementsService.elements(n,e).toPromise()]):[3,2];case 1:i._elements=r.sent(),this.elements.emit(this._elements),r.label=2;case 2:return this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t._elements=e.sent(),this.elements.emit(this._elements),this.state="ready",e.label=2;case 2:return[2]}}))}))},t}();E.decorators=[{type:e.Directive,args:[{selector:"ngx-stripe-card-group,[ngxStripeCardGroup]"}]}],E.ctorParameters=function(){return[{type:d}]},E.propDecorators={elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],elements:[{type:e.Output}]};var g=function(){function t(t,n){this.stripeElementsService=t,this.cardGroup=n,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){return o(this,(function(e){return(t.options||t.containerClass)&&this.setupElement("options"),[2]}))}))},t.prototype.ngOnInit=function(){var t=this;if(!this.cardGroup)throw new Error("StripeCardNumberComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe((function(e){t.elements=e,t.setupElement("elements")}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardNumber=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardNumber",n),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t}();g.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-card-number",template:'<div class="field" #stripeElementRef></div>'}]}],g.ctorParameters=function(){return[{type:d},{type:E,decorators:[{type:e.Optional}]}]},g.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var b=function(){function t(t,n){this.stripeElementsService=t,this.cardGroup=n,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){return o(this,(function(e){return(t.options||t.containerClass)&&this.setupElement("options"),[2]}))}))},t.prototype.ngOnInit=function(){var t=this;if(!this.cardGroup)throw new Error("StripeCardExpiryComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe((function(e){t.elements=e,t.setupElement("elements")}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardExpiry=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardExpiry",n),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t}();b.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-card-expiry",template:'<div class="field" #stripeElementRef></div>'}]}],b.ctorParameters=function(){return[{type:d},{type:E,decorators:[{type:e.Optional}]}]},b.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var w=function(){function t(t,n){this.stripeElementsService=t,this.cardGroup=n,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){return o(this,(function(e){return(t.options||t.containerClass)&&this.setupElement("options"),[2]}))}))},t.prototype.ngOnInit=function(){var t=this;if(!this.cardGroup)throw new Error("StripeCardCvcComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe((function(e){t.elements=e,t.setupElement("elements")}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardCvc=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardCvc",n),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t}();w.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-card-cvc",template:'<div class="field" #stripeElementRef></div>'}]}],w.ctorParameters=function(){return[{type:d},{type:E,decorators:[{type:e.Optional}]}]},w.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var O=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,t.elementsOptions||t.stripe||!this.elements?(i=this,[4,this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]):[3,2];case 1:i.elements=r.sent(),n=!0,r.label=2;case 2:return(t.options||t.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t.elements=e.sent(),this.createElement(),this.state="ready",e.label=2;case 2:return[2]}}))}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getFpxBank=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={accountHolderType:"individual"}),this.element=this.elements.create("fpxBank",t),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t}();O.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-fpx-bank",template:'<div class="field" #stripeElementRef></div>'}]}],O.ctorParameters=function(){return[{type:d}]},O.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var S=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,t.elementsOptions||t.stripe||!this.elements?(i=this,[4,this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]):[3,2];case 1:i.elements=r.sent(),n=!0,r.label=2;case 2:return(t.options||t.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t.elements=e.sent(),this.createElement(),this.state="ready",e.label=2;case 2:return[2]}}))}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getIdealBank=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("idealBank",t),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t}();S.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-ideal-bank",template:'<div class="field" #stripeElementRef></div>'}]}],S.ctorParameters=function(){return[{type:d}]},S.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var C=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,t.elementsOptions||t.stripe||!this.elements?(i=this,[4,this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]):[3,2];case 1:i.elements=r.sent(),n=!0,r.label=2;case 2:return(t.options||t.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t.elements=e.sent(),this.createElement(),this.state="ready",e.label=2;case 2:return[2]}}))}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getIban=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("iban",t),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t}();C.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-iban",template:'<div class="field" #stripeElementRef></div>'}]}],C.ctorParameters=function(){return[{type:d}]},C.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var P=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.escape=new e.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(r){switch(r.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,t.elementsOptions||t.stripe||!this.elements?(i=this,[4,this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]):[3,2];case 1:i.elements=r.sent(),n=!0,r.label=2;case 2:return(t.options||t.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}}))}))},t.prototype.ngOnInit=function(){return s(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",t=this,[4,this.stripeElementsService.elements(this.stripe).toPromise()]);case 1:t.elements=e.sent(),this.createElement(),this.state="ready",e.label=2;case 2:return[2]}}))}))},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getAuBankAccount=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("auBankAccount",t),this.element.on("change",(function(t){return e.change.emit(t)})),this.element.on("blur",(function(){return e.blur.emit()})),this.element.on("focus",(function(){return e.focus.emit()})),this.element.on("ready",(function(){return e.ready.emit()})),this.element.on("escape",(function(){return e.escape.emit()})),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t}();P.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-au-bank-account",template:'<div class="field" #stripeElementRef></div>'}]}],P.ctorParameters=function(){return[{type:d}]},P.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],blur:[{type:e.Output}],change:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],escape:[{type:e.Output}]};var I=function(){function t(t){this.stripeElementsService=t,this.load=new e.EventEmitter,this.change=new e.EventEmitter,this.blur=new e.EventEmitter,this.focus=new e.EventEmitter,this.ready=new e.EventEmitter,this.token=new e.EventEmitter,this.paymentMethod=new e.EventEmitter,this.source=new e.EventEmitter,this.cancel=new e.EventEmitter,this.shippingaddresschange=new e.EventEmitter,this.shippingoptionchange=new e.EventEmitter,this.notavailable=new e.EventEmitter}return t.prototype.ngOnChanges=function(t){return s(this,void 0,void 0,(function(){var e,n,i,r,s,p=this;return o(this,(function(o){switch(o.label){case 0:return e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=this.elementsOptions,i=this.stripe,r=!1,t.elementsOptions||t.stripe||!this.elements?[4,this.stripeElementsService.elements(i,n).toPromise()]:[3,2];case 1:s=o.sent(),this.elements=s,r=!0,o.label=2;case 2:return t.paymentOptions&&this.paymentRequest&&this.updateRequest(this.paymentOptions),(t.options||t.containerClass||!this.element||r)&&(this.element&&!r?this.update(e):this.elements&&r&&(this.paymentRequest=this.stripeElementsService.paymentRequest(i,this.paymentOptions),this.paymentRequest.on("token",(function(t){return p.token.emit(t)})),this.paymentRequest.on("paymentmethod",(function(t){return p.paymentMethod.emit(t)})),this.paymentRequest.on("source",(function(t){return p.source.emit(t)})),this.paymentRequest.on("cancel",(function(){return p.cancel.emit()})),this.paymentRequest.on("shippingaddresschange",(function(t){return p.shippingaddresschange.emit(t)})),this.paymentRequest.on("shippingoptionchange",(function(t){return p.shippingoptionchange.emit(t)})),this.element=this.elements.create("paymentRequestButton",Object.assign({paymentRequest:this.paymentRequest},e)),this.canMakePayment().subscribe((function(t){t?(p.element.on("click",(function(t){return p.change.emit(t)})),p.element.on("blur",(function(){return p.blur.emit()})),p.element.on("focus",(function(){return p.focus.emit()})),p.element.on("ready",(function(){return p.ready.emit()})),p.element.mount(p.stripeElementRef.nativeElement),p.load.emit({paymentRequestButton:p.element,paymentRequest:p.paymentRequest})):p.notavailable.emit()})))),[2]}}))}))},t.prototype.canMakePayment=function(){return r.from(this.paymentRequest.canMakePayment())},t.prototype.update=function(t){this.element.update(t)},t.prototype.updateRequest=function(t){this.paymentRequest.update(t)},t.prototype.show=function(){this.paymentRequest.show()},t.prototype.getButton=function(){return this.element},t}();I.decorators=[{type:e.Component,args:[{selector:"ngx-stripe-payment-request-button",template:'<div class="field" #stripeElementRef></div>'}]}],I.ctorParameters=function(){return[{type:d}]},I.propDecorators={stripeElementRef:[{type:e.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:e.Input}],paymentOptions:[{type:e.Input}],options:[{type:e.Input}],elementsOptions:[{type:e.Input}],stripe:[{type:e.Input}],load:[{type:e.Output}],change:[{type:e.Output}],blur:[{type:e.Output}],focus:[{type:e.Output}],ready:[{type:e.Output}],token:[{type:e.Output}],paymentMethod:[{type:e.Output}],source:[{type:e.Output}],cancel:[{type:e.Output}],shippingaddresschange:[{type:e.Output}],shippingoptionchange:[{type:e.Output}],notavailable:[{type:e.Output}]};var R=function(){function t(t,e,n,i){this.baseKey=t,this.baseOptions=e,this.loader=n,this.window=i}return t.prototype.create=function(t,e){return t||this.baseKey?new f(this.loader,this.window,t||this.baseKey,e||this.baseOptions):null},t}();R.decorators=[{type:e.Injectable}],R.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[a]}]},{type:void 0,decorators:[{type:e.Inject,args:[c]}]},{type:l},{type:m}]};var x=[v,g,b,w,O,S,C,P,I],D=[E],M=function(){function t(){}return t.forRoot=function(e,n){return{ngModule:t,providers:[l,y,R,d,m,h,{provide:a,useValue:e},{provide:c,useValue:n}]}},t.forChild=function(e,n){return{ngModule:t,providers:[l,y,R,d,m,h,{provide:a,useValue:e},{provide:c,useValue:n}]}},t}();M.decorators=[{type:e.NgModule,args:[{declarations:u(x,D),exports:u(x,D)}]}],t.DocumentRef=h,t.LazyStripeAPILoader=l,t.NgxStripeModule=M,t.STRIPE_OPTIONS=c,t.STRIPE_PUBLISHABLE_KEY=a,t.StripeAuBankAccountComponent=P,t.StripeCardComponent=v,t.StripeCardCvcComponent=w,t.StripeCardExpiryComponent=b,t.StripeCardGroupDirective=E,t.StripeCardNumberComponent=g,t.StripeElementsService=d,t.StripeFactoryService=R,t.StripeFpxBankComponent=O,t.StripeIbanComponent=C,t.StripeIdealBankComponent=S,t.StripeInstance=f,t.StripePaymentRequestButtonComponent=I,t.StripeService=y,t.WindowRef=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-stripe.umd.min.js.map